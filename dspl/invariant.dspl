invariant(ref, strategy, condition) = [
    if condition(input) then output else loop[ref, strategy]
]